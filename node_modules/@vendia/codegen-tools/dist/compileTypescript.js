import { invokeTsc } from './invokeTsc.js';
export const compileWithTsc = async ({ dotVendiaClientPath, cjsOutDir, esmOutDir, files, version, }) => {
    const options = {
        verbose: Boolean(process.env.DEBUG || process.env.VENDIA_DEBUG),
        dotVendiaClientPath,
    };
    // Common (+ CJS) options
    const tsOptions = {
        baseUrl: '.',
        target: 'esnext',
        module: 'commonjs',
        moduleResolution: 'node',
        declaration: true,
        esModuleInterop: true,
        skipLibCheck: true,
        lib: ['es2015', 'dom', 'es5'],
        outDir: cjsOutDir,
    };
    await invokeTsc(tsOptions, files, options);
    // ESM changes
    tsOptions.module = 'esnext';
    tsOptions.outDir = esmOutDir;
    const esmResult = await invokeTsc(tsOptions, files, options);
    return esmResult;
};
